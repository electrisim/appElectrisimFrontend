<!-- ALTERNATIVE VERSION WITH PARALLEL LOADING FOR BETTER PERFORMANCE -->
<!-- WARNING: This may cause dependency issues if scripts depend on each other -->
<!-- Use this version only if you're sure the scripts can load independently -->

<script>
// Replace the sequential loading with parallel loading
function loadElectrisimScriptsParallel() {
    var electrisimScripts = [
        'js/electrisim/utils/cellUtils.js',
        'js/electrisim/dialogs/dialogInitializer.js',
        'js/electrisim/dialogs/EditDataDialog.js',
        'js/electrisim/dialogs/LoadFlowDialog.js',
        'js/electrisim/dialogs/ShortCircuitDialog.js',
        'js/electrisim/lineBaseDialog.js',
        'js/electrisim/lineDialog.js',
        'js/electrisim/externalGridDialog.js',
        'js/electrisim/generatorDialog.js',
        'js/electrisim/staticGeneratorDialog.js',
        'js/electrisim/asymmetricStaticGeneratorDialog.js',
        'js/electrisim/busDialog.js',
        'js/electrisim/transformerBaseDialog.js',
        'js/electrisim/transformerDialog.js',
        'js/electrisim/threeWindingTransformerBaseDialog.js',
        'js/electrisim/threeWindingTransformerLibrary.js',
        'js/electrisim/shuntReactorDialog.js',
        'js/electrisim/capacitorDialog.js',
        'js/electrisim/loadDialog.js',
        'js/electrisim/asymmetricLoadDialog.js',
        'js/electrisim/shortCircuit.js',
        'js/electrisim/impedanceDialog.js',
        'js/electrisim/wardDialog.js',
        'js/electrisim/extendedWardDialog.js',
        'js/electrisim/motorDialog.js',
        'js/electrisim/storageDialog.js',
        'js/electrisim/SSCDialog.js',
        'js/electrisim/SVCDialog.js',
        'js/electrisim/TCSCDialog.js',
        'js/electrisim/dcLineDialog.js',
        'js/electrisim/configureAttributes.js',
        'js/electrisim/supportingFunctions.js',
        'js/electrisim/loadFlow.js'
    ];
    
    var loadedCount = 0;
    var totalScripts = electrisimScripts.length;
    
    function onScriptLoaded() {
        loadedCount++;
        if (loadedCount === totalScripts) {
            mxScriptsLoaded = true;
            checkAllLoaded();
        }
    }
    
    // Load all scripts in parallel
    electrisimScripts.forEach(function(scriptSrc) {
        var script = document.createElement('script');
        script.type = 'module';
        script.src = scriptSrc;
        script.onload = onScriptLoaded;
        script.onerror = onScriptLoaded; // Continue even if one fails
        document.head.appendChild(script);
    });
}

// To use this version, replace the sequential loading calls with:
// loadElectrisimScriptsParallel();
</script>

<!-- PERFORMANCE COMPARISON -->
<!-- 
Sequential Loading (Current): ~3-5 seconds
Parallel Loading (This version): ~1-2 seconds
Bundled (Recommended): ~0.5-1 second
--> 